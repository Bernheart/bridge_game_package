import 'package:bridge_game/bridge_game.dart';

enum Vulnerability {
  vulnerable,
  notVulnerable;

  Vulnerability get opposite => this == Vulnerability.vulnerable
      ? Vulnerability.notVulnerable
      : Vulnerability.vulnerable;

  bool isVulnerable() {
    return this == vulnerable;
  }

  factory Vulnerability.fromBool(bool isVul) {
    switch (isVul) {
      case true:
        return vulnerable;
      case false:
        return notVulnerable;
    }
  }

  static Map<int, List<PairDirection>> boardVulnerability = {
    1: [],
    2: [PairDirection.NS],
    3: [PairDirection.EW],
    4: [PairDirection.EW, PairDirection.NS]
  };

  static Vulnerability getVulnerability(int boardNumber, Direction player) {
    return BoardVulnerability.fromBoardNumber(boardNumber)
        .pairDirectionsMap[player.pairDirection]!;
  }
}
